<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Voice Search GPT</title>
</head>
<body>

<p id="content">
  The Guyana Revenue Authority (GRA) is responsible for the administration of taxes, customs, and licensing services in Guyana. 
  Citizens can apply for a Taxpayer Identification Number (TIN), renew their driver's licenses, register vehicles, and 
  file income tax returns. GRA aims to provide efficient taxpayer services and improve compliance through modernization and technology.
</p>

<button onclick="startListening()">Speak</button>

<div id="result"></div>

<script>
const apiKey = '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'; // Replace this with your API key

async function searchContent(query, content) {
  const response = await fetch("https://api.openai.com/v1/chat/completions", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "Authorization": `Bearer ${apiKey}`
    },
    body: JSON.stringify({
      model: "gpt-3.5-turbo",
      messages: [
        { role: "system", content: "Only answer using the provided text." },
        { role: "user", content: `Text: "${content}"\nQuery: "${query}"` }
      ],
      temperature: 0.2,
      max_tokens: 150
    })
  });
  const data = await response.json();
  return data.choices[0].message.content.trim();
}

function startListening() {
  const recognition = new webkitSpeechRecognition();
  recognition.lang = 'en-US';
  recognition.start();
  recognition.onresult = async (e) => {
    const query = e.results[0][0].transcript;
    const content = document.getElementById('content').innerText;
    const result = await searchContent(query, content);
    document.getElementById('result').innerText = result;
  };
  recognition.onerror = (e) => {
    document.getElementById('result').innerText = 'Error: ' + e.error;
  };
}
</script>

</body>
</html>
